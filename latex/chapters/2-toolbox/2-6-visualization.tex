\subsection{Visualization Tools}\label{sec:visualization}
    \dots\textit{introduction}\dots
    
    \subsubsection{MATLAB Virtual Reallity Toolbox}
        Virtual Reality Toolbox is an extension for MATLAB which allows creating and interacting with 3D virtual reality models of dynamic systems. In its core it uses \ac{vrml}, a language created in the early days of \ac{www} to display 3D objects and animations. This toolbox provides a way for implementing the \ac{vrml} models inside MATLAB script or Simulink simulation, and allows for control of driving display or animation with MATLAB variables and Simulink signals. Moreover, the toolbox is integrated with \ac{vrml} viewer and \ac{vrml} editor, allowing for building and displaying models directly from MATLAB environment.

        Virtual Reality Toolbox was used in \ac{scars} as most core method of visualization. The \ac{vrml} model is set up with 3 objects: Satellite, Earth and Sun, as they can be considered most useful when observing the effects of the simulation. Satellite model also includes objects representing antennas' range or optical instrument's field of view, if set up in simulation. This feature can be useful for analysis of imaging capabilities.

        The transformations required to process the data generated by \ac{scars}' Vehicle Dynamics block into \ac{vrml} parameters are as follows:
        \begin{equation}
            r_{VRML}=
            \begin{bmatrix}
            1&0&0\\ 
            0&0&-1\\ 
            0&1&0
            \end{bmatrix}
            r_{ECEF}
        \end{equation}
        
        \dots\textit{rest of transformations descriptions and example of visualization}\dots
        

    \subsubsection{Systems Tool Kit}
        \ac{stk}, formerly named Satellite Tool Kit, is a platform for analyzing and visualizing variety of ground, sea and space platforms missions. \ac{stk} is a commercial software solution used by most major organizations and companies such as \ac{nasa}, \ac{esa}, \ac{dlr}, Boeing, ICEYE. Features most relevant to the topic of this thesis are the graphical engine allowing for displaying the position and attitude of the satellite, and the set of analytical tools, such as ground station connection time calculator, allowing for fine-tuning of mission details.

        To visualize \ac{scars} simulation results with \ac{stk}, one must generate timestamped ephemeris and attitude files. \ac{scars} can generate such files for the user, with predetermined format according to \ac{stk} documentation\cite{stkephemeris}. Both files contain the preamble specifying parameters such as scenario epoch time, central body, coordinate system, distance unit and format of the file. As \ac{scars} relies mostly on \ac{ecef} reference frame, it is also chosen for ephemeris and attitude files. After the preamble, the file contains the lines for each data point. In case of ephemeris file  (\verb|.e| file) the have a format of:

        \begin{Verbatim}[fontsize=\small]
<TimeInSeconds> <X> <Y> <Z> <xDot> <yDot> <zDot>
        \end{Verbatim}

        Where the unit of time is seconds and relative to defined scenario epoch and following parameters are \ac{ecef} vectors in $m$, $m/s$ and $m/s^2$ respectively. For the attitude file (\verb|.a| file), the format is:
        
        \begin{Verbatim}[fontsize=\small]
<TimeInSeconds> <q1> <q2> <q3> <q4>
        \end{Verbatim}
        
        Where time is formatted in same manner as in ephemeris file and the following parameters build a quaternion vector, with fourth element being scalar component.

        Example \verb|.e| and \verb|.a| files can be found in \autoref{app:efile} and \autoref{app:afile} respectively.

        %https://help.agi.com/stk/11.0.1/Content/stk/importfiles-02.htm#timePosVelAcc

        \begin{figure}[H]
            \centering
            \includegraphics[width=1\textwidth, height=280px]{example-image-b}
            \caption{Example of STK satellite visualization}
            \label{fig:stk}
        \end{figure}


    \subsubsection{Kerbal Space Program}\label{sec:ksp}
        Finally, \ac{ksp}, a space flight simulation video game, can be used as a nonconventional method to visualize the results of \ac{scars} Toolbox simulation. In \ac{ksp} the player directs a developing space program originated on fictional Earth-like planet Kerbin. The game provides the tools for the players to design and fly rockets, probes, satellites, spaceplanes, rovers, and other spacecraft from a library of components.\cite{kerbals} The aim of this visualization method was to build a sample satellite in \ac{ksp}, simulate it in \ac{scars} and execute a Hohmann Transfer within a game, using simulation outputs as game inputs.

        The connection between MATLAB and \ac{ksp} is possible because of fanmade \ac{krpc} mod. It creates a API server running alongside the game, with which calls can be made using already written clients in most popular languages, like C++, Python, Lua, Java, etc. Integrating it with MATLAB has proved to be a difficult task, as MATLAB doesn't provide simple means for threading, which means that inputs for the game have to be precalculated to work in real time. Moreover, there is no \ac{krpc} library written directly for MATLAB, therefore a simple Python bridge was written to parse the data taken from the game, compare them with pre-generated \ac{scars} simulation scenario outputs and send them to \ac{ksp} as in-game \ac{aocs} subsystem inputs.

        \begin{figure}[H]
            \centering
            \includegraphics[width=1\textwidth, height=100px]{example-image-b}
            \caption{Example of kRPC Python client code}
            \label{fig:krcp}
        \end{figure}

        \dots\textit{rest description and screenshots of visualization}\dots